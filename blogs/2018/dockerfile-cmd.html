<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DockerFile 命令总结 | DUC&#39;S Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="何时才能暴富">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.fd6f0cf4.css" as="style"><link rel="preload" href="/assets/js/app.744fdf87.js" as="script"><link rel="preload" href="/assets/js/5.680646ba.js" as="script"><link rel="preload" href="/assets/js/1.a3347c49.js" as="script"><link rel="preload" href="/assets/js/65.bb083126.js" as="script"><link rel="prefetch" href="/assets/js/10.d303dfd9.js"><link rel="prefetch" href="/assets/js/100.c20e7358.js"><link rel="prefetch" href="/assets/js/101.d029b348.js"><link rel="prefetch" href="/assets/js/102.21ef1a7d.js"><link rel="prefetch" href="/assets/js/103.1dd5c7d9.js"><link rel="prefetch" href="/assets/js/104.c1a5ed52.js"><link rel="prefetch" href="/assets/js/105.9859ad7c.js"><link rel="prefetch" href="/assets/js/106.d0d4194e.js"><link rel="prefetch" href="/assets/js/107.a3c64a9a.js"><link rel="prefetch" href="/assets/js/108.bf39e8f3.js"><link rel="prefetch" href="/assets/js/109.0e3b7bb2.js"><link rel="prefetch" href="/assets/js/11.a2b4f16d.js"><link rel="prefetch" href="/assets/js/110.4961ecfd.js"><link rel="prefetch" href="/assets/js/111.d1e85066.js"><link rel="prefetch" href="/assets/js/112.582aa8ea.js"><link rel="prefetch" href="/assets/js/113.c52ebba8.js"><link rel="prefetch" href="/assets/js/114.b3eacfc6.js"><link rel="prefetch" href="/assets/js/115.fc8bfe8e.js"><link rel="prefetch" href="/assets/js/116.f5dc9389.js"><link rel="prefetch" href="/assets/js/117.f978fb65.js"><link rel="prefetch" href="/assets/js/118.7bc1cd3a.js"><link rel="prefetch" href="/assets/js/119.96e40cf8.js"><link rel="prefetch" href="/assets/js/12.90ad031f.js"><link rel="prefetch" href="/assets/js/120.1b836bd8.js"><link rel="prefetch" href="/assets/js/121.c756804f.js"><link rel="prefetch" href="/assets/js/122.ff66c7c5.js"><link rel="prefetch" href="/assets/js/123.3c51be2c.js"><link rel="prefetch" href="/assets/js/124.1254f9b1.js"><link rel="prefetch" href="/assets/js/125.03aa6bc1.js"><link rel="prefetch" href="/assets/js/126.abfb5578.js"><link rel="prefetch" href="/assets/js/127.3bdb5d01.js"><link rel="prefetch" href="/assets/js/128.5b81178c.js"><link rel="prefetch" href="/assets/js/129.24437b79.js"><link rel="prefetch" href="/assets/js/13.5c81776c.js"><link rel="prefetch" href="/assets/js/130.e9f83ef1.js"><link rel="prefetch" href="/assets/js/131.b4740fa1.js"><link rel="prefetch" href="/assets/js/132.89265630.js"><link rel="prefetch" href="/assets/js/133.019c3bff.js"><link rel="prefetch" href="/assets/js/134.e73abdbb.js"><link rel="prefetch" href="/assets/js/135.1c39b0b3.js"><link rel="prefetch" href="/assets/js/136.171da966.js"><link rel="prefetch" href="/assets/js/137.0b4537e5.js"><link rel="prefetch" href="/assets/js/138.7caeded1.js"><link rel="prefetch" href="/assets/js/139.7b2a33e3.js"><link rel="prefetch" href="/assets/js/14.b2f53fae.js"><link rel="prefetch" href="/assets/js/140.64b5777c.js"><link rel="prefetch" href="/assets/js/141.f55f1626.js"><link rel="prefetch" href="/assets/js/142.cf99f97c.js"><link rel="prefetch" href="/assets/js/143.15f7be62.js"><link rel="prefetch" href="/assets/js/144.048953be.js"><link rel="prefetch" href="/assets/js/145.7866c73a.js"><link rel="prefetch" href="/assets/js/146.ce0f302c.js"><link rel="prefetch" href="/assets/js/147.c0c91e63.js"><link rel="prefetch" href="/assets/js/148.b165cb6a.js"><link rel="prefetch" href="/assets/js/149.51bcaf2c.js"><link rel="prefetch" href="/assets/js/15.7698236f.js"><link rel="prefetch" href="/assets/js/150.323f2443.js"><link rel="prefetch" href="/assets/js/151.2ac881ff.js"><link rel="prefetch" href="/assets/js/152.fffbec45.js"><link rel="prefetch" href="/assets/js/153.c945a07f.js"><link rel="prefetch" href="/assets/js/154.e4a8095a.js"><link rel="prefetch" href="/assets/js/155.38867851.js"><link rel="prefetch" href="/assets/js/156.9aa4de25.js"><link rel="prefetch" href="/assets/js/157.e4473910.js"><link rel="prefetch" href="/assets/js/16.351c940b.js"><link rel="prefetch" href="/assets/js/17.b7e86d9c.js"><link rel="prefetch" href="/assets/js/18.b54264db.js"><link rel="prefetch" href="/assets/js/19.d16fbfc5.js"><link rel="prefetch" href="/assets/js/20.4694d56f.js"><link rel="prefetch" href="/assets/js/21.98d1a65c.js"><link rel="prefetch" href="/assets/js/22.819d0361.js"><link rel="prefetch" href="/assets/js/23.d1a52dd6.js"><link rel="prefetch" href="/assets/js/24.e985d14c.js"><link rel="prefetch" href="/assets/js/25.e4fef143.js"><link rel="prefetch" href="/assets/js/26.467c625b.js"><link rel="prefetch" href="/assets/js/27.dc464cdd.js"><link rel="prefetch" href="/assets/js/28.5d534fab.js"><link rel="prefetch" href="/assets/js/29.23dfc5e6.js"><link rel="prefetch" href="/assets/js/3.84982bcb.js"><link rel="prefetch" href="/assets/js/30.1288953a.js"><link rel="prefetch" href="/assets/js/31.c4445c68.js"><link rel="prefetch" href="/assets/js/32.2f4e746d.js"><link rel="prefetch" href="/assets/js/33.8d14f8d9.js"><link rel="prefetch" href="/assets/js/34.251e5f33.js"><link rel="prefetch" href="/assets/js/35.6e387404.js"><link rel="prefetch" href="/assets/js/36.39b23672.js"><link rel="prefetch" href="/assets/js/37.2e4d3ac7.js"><link rel="prefetch" href="/assets/js/38.0120d7da.js"><link rel="prefetch" href="/assets/js/39.1582ff37.js"><link rel="prefetch" href="/assets/js/4.6abdb610.js"><link rel="prefetch" href="/assets/js/40.9b5caf9b.js"><link rel="prefetch" href="/assets/js/41.3b16486c.js"><link rel="prefetch" href="/assets/js/42.872524aa.js"><link rel="prefetch" href="/assets/js/43.1f733026.js"><link rel="prefetch" href="/assets/js/44.ecbf0eb4.js"><link rel="prefetch" href="/assets/js/45.f5706d96.js"><link rel="prefetch" href="/assets/js/46.95801536.js"><link rel="prefetch" href="/assets/js/47.b16dbba0.js"><link rel="prefetch" href="/assets/js/48.1286863f.js"><link rel="prefetch" href="/assets/js/49.bd28d9a3.js"><link rel="prefetch" href="/assets/js/50.5104669f.js"><link rel="prefetch" href="/assets/js/51.4866265f.js"><link rel="prefetch" href="/assets/js/52.5020521c.js"><link rel="prefetch" href="/assets/js/53.f08ed594.js"><link rel="prefetch" href="/assets/js/54.ec579400.js"><link rel="prefetch" href="/assets/js/55.27e436fa.js"><link rel="prefetch" href="/assets/js/56.e36035c3.js"><link rel="prefetch" href="/assets/js/57.f7574135.js"><link rel="prefetch" href="/assets/js/58.07b62986.js"><link rel="prefetch" href="/assets/js/59.b9dde12e.js"><link rel="prefetch" href="/assets/js/6.d1dfd040.js"><link rel="prefetch" href="/assets/js/60.2406b3c3.js"><link rel="prefetch" href="/assets/js/61.5af1fd05.js"><link rel="prefetch" href="/assets/js/62.69620354.js"><link rel="prefetch" href="/assets/js/63.f6e500b4.js"><link rel="prefetch" href="/assets/js/64.8f862556.js"><link rel="prefetch" href="/assets/js/66.a6c62641.js"><link rel="prefetch" href="/assets/js/67.acd67578.js"><link rel="prefetch" href="/assets/js/68.1dc76946.js"><link rel="prefetch" href="/assets/js/69.904bf92b.js"><link rel="prefetch" href="/assets/js/7.c0080a1d.js"><link rel="prefetch" href="/assets/js/70.3b6e3205.js"><link rel="prefetch" href="/assets/js/71.593c25ab.js"><link rel="prefetch" href="/assets/js/72.c3f72da9.js"><link rel="prefetch" href="/assets/js/73.1862d520.js"><link rel="prefetch" href="/assets/js/74.c87cc614.js"><link rel="prefetch" href="/assets/js/75.a0c9b8a3.js"><link rel="prefetch" href="/assets/js/76.07907735.js"><link rel="prefetch" href="/assets/js/77.9148502b.js"><link rel="prefetch" href="/assets/js/78.2fc82ab0.js"><link rel="prefetch" href="/assets/js/79.0a71f594.js"><link rel="prefetch" href="/assets/js/8.8a0ecc6a.js"><link rel="prefetch" href="/assets/js/80.f0a3aaec.js"><link rel="prefetch" href="/assets/js/81.21ac923e.js"><link rel="prefetch" href="/assets/js/82.8688256e.js"><link rel="prefetch" href="/assets/js/83.cf412b34.js"><link rel="prefetch" href="/assets/js/84.076ec6ec.js"><link rel="prefetch" href="/assets/js/85.28093271.js"><link rel="prefetch" href="/assets/js/86.0e12a840.js"><link rel="prefetch" href="/assets/js/87.d3360e66.js"><link rel="prefetch" href="/assets/js/88.290a14d6.js"><link rel="prefetch" href="/assets/js/89.1db157f3.js"><link rel="prefetch" href="/assets/js/9.0e4b1c9f.js"><link rel="prefetch" href="/assets/js/90.52e5d5b3.js"><link rel="prefetch" href="/assets/js/91.ef03d05d.js"><link rel="prefetch" href="/assets/js/92.1e2b2b5a.js"><link rel="prefetch" href="/assets/js/93.f34b1c24.js"><link rel="prefetch" href="/assets/js/94.34544259.js"><link rel="prefetch" href="/assets/js/95.41a8e6f7.js"><link rel="prefetch" href="/assets/js/96.015d93c6.js"><link rel="prefetch" href="/assets/js/97.af61ebd0.js"><link rel="prefetch" href="/assets/js/98.6a3ee122.js"><link rel="prefetch" href="/assets/js/99.12e048f8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fd6f0cf4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>duc</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>duc's blog</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>duc</span>
            
          <span data-v-4e82dffc>2018 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="DUC'S Blog" class="logo"> <span class="site-name">DUC'S Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/技术/" class="nav-link"><i class="undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/书籍/" class="nav-link"><i class="undefined"></i>
  书籍
</a></li><li class="dropdown-item"><!----> <a href="/categories/计划/" class="nav-link"><i class="undefined"></i>
  计划
</a></li><li class="dropdown-item"><!----> <a href="/categories/未来/" class="nav-link"><i class="undefined"></i>
  未来
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duc-cnZj" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    duc
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>147</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>145</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/技术/" class="nav-link"><i class="undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/书籍/" class="nav-link"><i class="undefined"></i>
  书籍
</a></li><li class="dropdown-item"><!----> <a href="/categories/计划/" class="nav-link"><i class="undefined"></i>
  计划
</a></li><li class="dropdown-item"><!----> <a href="/categories/未来/" class="nav-link"><i class="undefined"></i>
  未来
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duc-cnZj" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>DockerFile 命令总结</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>duc</span>
            
          <span data-v-4e82dffc>2018 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">DockerFile 命令总结</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>duc</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2018/12/10</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/blogs/2018/dockerfile-cmd.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>DockerFile</span></i></div></div> <div class="theme-reco-content content__default"><blockquote><p>转自 <a href="https://mp.weixin.qq.com/s?__biz=MzI5ODQ2MzI3NQ==&amp;mid=2247485972&amp;idx=1&amp;sn=6e839c0b05464878f2b2fcc7e7e9a276&amp;chksm=eca43350dbd3ba461b5c0d3a7368badac3af123c7cae2a624aabde44f3972247554e1f9b6026&amp;scene=38#wechat_redirect" target="_blank" rel="noopener noreferrer">k8s中文社区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>只描述非<code>windows</code>系统。</p></blockquote> <ul><li><code>FROM &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code>: 设置基础镜像</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> alpine:latest</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>RUN &lt;command&gt; \ [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code>: 执行<code>shell</code>脚本。进来少使用<code>RUN</code>，因为没执行一次 <code>docker</code>就会增加一层只读层。</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">RUN</span> /bin/bash -c <span class="token string">'source $HOME/.bashrc; \
echo $HOME'</span></span>
等同于
<span class="token instruction"><span class="token keyword">RUN</span> /bin/bash -c <span class="token string">'source $HOME/.bashrc; echo $HOME'</span></span>
等同于
<span class="token instruction"><span class="token keyword">RUN</span> [<span class="token string">&quot;/bin/bash&quot;</span>, <span class="token string">&quot;-c&quot;</span>, <span class="token string">&quot;source $HOME/.bashrc; echo $HOME&quot;</span>]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] \ [&quot;param1&quot;,&quot;param2&quot;] \ command param1 param2</code>: <code>DockerFile</code>中只有一个<code>CMD</code>，多于一个将执行最后一个。它的意思差不多就是启动容器后执行的默认命令。</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> *:*</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;catalina.sh&quot;</span>, <span class="token string">&quot;run&quot;</span>]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</code> : 镜像标签</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">LABEL</span> <span class="token string">&quot;com.example.vendor&quot;</span>=<span class="token string">&quot;ACME Incorporated&quot;</span></span>
<span class="token instruction"><span class="token keyword">LABEL</span> com.example.label-with-value=<span class="token string">&quot;foo&quot;</span></span>
<span class="token instruction"><span class="token keyword">LABEL</span> version=<span class="token string">&quot;1.0&quot;</span></span>
<span class="token instruction"><span class="token keyword">LABEL</span> description=<span class="token string">&quot;This text illustrates \
that label-values can span multiple lines.&quot;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</code>: 暴露容器的端口</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">EXPOSE</span> 80/tcp</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80/udp</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>ENV &lt;key&gt; &lt;value&gt; \ &lt;key&gt;=&lt;value&gt;</code>: 设置容器环境变量。可以使用<code>docker run --env &lt;key&gt;=&lt;value&gt;</code>修改环境变量</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">ENV</span> myName John Doe</span>
<span class="token instruction"><span class="token keyword">ENV</span> myDog Rex The Dog</span>
<span class="token instruction"><span class="token keyword">ENV</span> myCat fluffy</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt; \ [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]</code>: 拷贝一个新文件，或者文件夹或者远程文件的 URLS，把他们添加到，镜像的文件系统中。<code>&lt;dest&gt;</code> 为绝对路径或者由<code>WORKDIR</code>定义的相对路径。</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">ADD</span> hom* /mydir/         # 添加所有以 <span class="token string">&quot;hom&quot;</span> 开头的文件</span>
<span class="token instruction"><span class="token keyword">ADD</span> hom?.txt /mydir/     # ? 替换任何单个的字符, e.g., <span class="token string">&quot;home.txt&quot;</span></span>

<span class="token instruction"><span class="token keyword">ADD</span> test relativeDir/    # 添加 <span class="token string">&quot;test&quot;</span> 到 `WORKDIR`/relativeDir/</span>
<span class="token instruction"><span class="token keyword">ADD</span> test /absoluteDir/   # 添加 <span class="token string">&quot;test&quot;</span> 到 /absoluteDir/</span>

<span class="token instruction"><span class="token keyword">ENV</span> cpath /home/zb</span>
<span class="token instruction"><span class="token keyword">ARG</span> zbpath=/home/lala</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> <span class="token variable">$cpath</span></span>
<span class="token instruction"><span class="token keyword">ADD</span> **.jpg <span class="token variable">$cpath</span></span>
<span class="token instruction"><span class="token keyword">ADD</span> **.jpg <span class="token variable">$zbpath</span></span>

<span class="token comment"># 添加含有特殊字符的文件或者文件夹时如“[]”,需要遵循 golang 的规则将它们进行转义，以防它们为匹配模式</span>
<span class="token instruction"><span class="token keyword">ADD</span> arr[[]0].txt /mydir/ # 复制一个文件名为 <span class="token string">&quot;arr[0].txt&quot;</span> 到 /mydir/</span>

<span class="token comment"># 通过 --chown 指定添加文件或者文件夹的用户名和组名</span>
<span class="token instruction"><span class="token keyword">ADD</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">55:mygroup</span></span> files* /somedir/</span>
<span class="token instruction"><span class="token keyword">ADD</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">bin</span></span> files* /somedir/</span>
<span class="token instruction"><span class="token keyword">ADD</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">1</span></span> files* /somedir/</span>
<span class="token instruction"><span class="token keyword">ADD</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">10:11</span></span> files* /somedir/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt; / [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]</code>:  与 <code>ADD</code>命令差不多。</li> <li><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] / command param1 param2</code>:  容器启动后执行该命令。如果定义<code>ENTRYPOINT</code> 那么<code>CMD</code>形式就变为<code>CMD [&quot;param1&quot;,&quot;param2&quot;]</code> <code>json</code>数组中变为<code>ENTRYPOINT</code>的第一个参数和第二个参数</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">ARG</span> VERSION=latest</span>
<span class="token instruction"><span class="token keyword">FROM</span> alpine:<span class="token variable">$VERSION</span></span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;ls&quot;</span>, <span class="token string">&quot;-la&quot;</span>]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>ENTRYPOINT</code>与<code>CMD</code>的比较</p> <ol><li>当有多个<code>ENTRYPOINT CMD</code>它们都只执行最后一个</li> <li>当容器为一个可执行文件时应该定义<code>ENTRYPOINT</code></li> <li>当同时定义<code>ENTRYPOINT 和 CMD</code>时，<code>CMD</code>为<code>ENTRYPOINT</code>的默认参数</li> <li>当<code>docker</code>执行<code>run</code>命令时，在里面指定<code>CMD</code>时，<code>CMD</code>将会被重写。</li></ol> <ul><li><code>VOLUME [&quot;/data&quot;]</code>: 在制作镜像时挂载卷。会在宿主机上自动生成一个对应的共享目录。</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">RUN</span> mkdir /data1</span>
<span class="token instruction"><span class="token keyword">RUN</span> touch /data1/2a.txt</span>
<span class="token instruction"><span class="token keyword">VOLUME</span> /data1</span>

<span class="token comment"># 通过命令 docker inspect hasVvolume</span>
&quot;Mounts&quot;: [
            {
                &quot;Type&quot;: &quot;volume&quot;,
                &quot;Name&quot;: &quot;0d63fcdf621ee728bb85dfcc2b30f3acddf6489a0e93b81ced17f05860497321&quot;,
                &quot;Source&quot;: &quot;/var/lib/docker/volumes/0d63fcdf621ee728bb85dfcc2b30f3acddf6489a0e93b81ced17f05860497321/_data&quot;,
                &quot;Destination&quot;: &quot;/data1&quot;,
                &quot;Driver&quot;: &quot;local&quot;,
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;&quot;
            }
        ]
====================================================================================
<span class="token comment"># 也可以通过 docker run -v 来挂载共享目录，这时 Source 指出 -v 时定义的目录</span>
&quot;Mounts&quot;: [
        {
                &quot;Type&quot;: &quot;bind&quot;,
                &quot;Source&quot;: &quot;/Users/zhangbo/Desktop/data1&quot;,
                &quot;Destination&quot;: &quot;/data1&quot;,
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;rprivate&quot;
            }
        ]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>容器中共享目录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 使用 --volumes-from，达到容器中文件夹共享</span>
<span class="token function">docker</span> run -itd --name noVvolume-v-1 --volumes-from noVvolume-v 48cd9e43b6a9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>USER &lt;user&gt;[:&lt;group&gt;] / &lt;UID&gt;[:&lt;GID&gt;]</code>: 给镜像添加一个用户</li> <li><code>WORKDIR /path/to/workdir or WORKDIR to_workdir /path/to/workdir</code>: 为 <code>RUN, CMD, ENTRYPOINT, COPY, ADD</code> 创建工作目录</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">ENV</span> DIRPATH /path</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> <span class="token variable">$DIRPATH</span>/<span class="token variable">$DIRNAME</span></span>
<span class="token instruction"><span class="token keyword">RUN</span> pwd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>ARG &lt;name&gt;[=&lt;default value&gt;]</code> : <code>docker file</code>中的变量</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM busybox
ARG user1=&quot;zhang bo&quot;
ARG buildno
RUN echo $user1
RUN echo $buildno

Step */* : RUN echo $user1
 ---&gt; Running in a56a602a8f87
zhang bo
Removing intermediate container a56a602a8f87
 ---&gt; 3e9c6ec19129
Step */* : RUN echo $buildno
 ---&gt; Running in 6598768a1080
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>预制变量</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> ubuntu</span>
<span class="token instruction"><span class="token keyword">ARG</span> CONT_IMG_VER</span>
<span class="token instruction"><span class="token keyword">ENV</span> CONT_IMG_VER <span class="token variable">${CONT_IMG_VER:-v1.0.0}</span></span>
<span class="token instruction"><span class="token keyword">RUN</span> echo <span class="token variable">$CONT_IMG_VER</span></span>

<span class="token comment"># 可以通过 --build-arg 标签进行给定的预制的变量。--build-arg &lt;varname&gt;=&lt;value&gt;</span>
docker run --build-arg CONT_IMG_VER=******* .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="docker-常用命令如下"><a href="#docker-常用命令如下" class="header-anchor">#</a> docker 常用命令如下</h2> <p>管理命令：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>  container   管理容器
  image       管理镜像
  network     管理网络
  node        管理Swarm节点
  plugin      管理插件
  secret      管理Docker secrets
  service     管理服务
  stack       管理Docker stacks
  swarm       管理Swarm集群
  system      查看系统信息
  volume      管理卷
  
  如：docker container ls 显示所有容器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>普通命令：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>  attach     进入一个运行的容器
  build      从一个DockerFile构建镜像
  commit     从容器创建一个镜像
  cp          从容器和主机文件系统之间拷贝文件 
  create      创建一个容器
  diff        检查容器文件系统上的更改
  events      从服务器获取实时事件
  exec        在正在运行的容器中运行命令
  export      将容器的文件系统导出为tar存档
  history     显示镜像的历史记录
  images      查看镜像列表
  import      从归档文件中创建镜像
  info        显示系统范围的信息
  inspect     返回Docker对象的低级信息
  kill        kill运行中的容器
  load        从存档或者STDIN加载镜像
  login       登陆docker镜像仓库
  logout      退出docker镜像仓库
  logs        获取一个容器的日志
  pause       暂停一个或多个容器中的所有进程
  port        查看端口映射或容器的特定映射列表
  ps          查看容器列表
  pull        从镜像仓库拉取镜像
  push        将本地的镜像上传到镜像仓库,要先登陆到镜像仓库
  rename      重命名容器
  restart     重启容器
  rm          删除容器
  rmi         删除镜像
  run         创建一个新的容器并运行一个命令
  save        将指定镜像保存成 tar 归档文件
  search      从Docker Hub搜索镜像
  start       启动容器
  stats       实时显示容器资源使用情况的统计信息
  stop       停止容器
  tag         标记本地镜像，将其归入某一仓库
  top         展示一个容器中运行的进程
  unpause     恢复容器中所有的进程
  update      更新容器配置
  version    显示Docker的版本信息
  wait        阻塞直到容器停止，然后打印退出代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于: </span> <span class="time">2022/1/27 下午2:06:56</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/blogs/2018/dockerfile-cmd.html#docker-常用命令如下" class="sidebar-link reco-side-docker-常用命令如下" data-v-70334359>docker 常用命令如下</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.744fdf87.js" defer></script><script src="/assets/js/5.680646ba.js" defer></script><script src="/assets/js/1.a3347c49.js" defer></script><script src="/assets/js/65.bb083126.js" defer></script>
  </body>
</html>
