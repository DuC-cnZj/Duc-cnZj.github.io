(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{956:function(t,e,n){"use strict";n.r(e);var r=n(13),o=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"k8s-bookmark-机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#k8s-bookmark-机制"}},[t._v("#")]),t._v(" k8s bookmark 机制")]),t._v(" "),n("p",[t._v("​\n​\n因为etcd会定期压缩版本，如果你k8s客户端watch的资源很久没有更新会导致一旦网络不稳定比如 ConnectionRefused 那么就会重新 watch 带上那个 version，因为被compacted了，watch报错，会退出方法重新执行ListAndWatch，重新list会带给apiserver压力。\n​\n​\n​\n代码 "),n("code",[t._v("func (r *Reflector) ListAndWatch(stopCh <-chan struct{})")]),t._v("。\n10\n​\n​\n​")]),t._v(" "),n("h2",{attrs:{id:"etcd-版本机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#etcd-版本机制"}},[t._v("#")]),t._v(" etcd 版本机制")]),t._v(" "),n("p",[t._v("​")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.modb.pro/db/79479",target:"_blank",rel:"noopener noreferrer"}},[t._v("etcd 中让人头大的 version, revision, createRevision, modRevision - 墨天轮"),n("OutboundLink")],1),t._v("\n​\n​")])]),t._v(" "),n("p",[t._v("​## kubernetes - What k8s bookmark solves?")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://stackoverflow.com/questions/66080942/what-k8s-bookmark-solves",target:"_blank",rel:"noopener noreferrer"}},[t._v("kubernetes - What k8s bookmark solves? - Stack Overflow"),n("OutboundLink")],1),t._v("\n20\n​\n​\n​")])])}),[],!1,null,null,null);e.default=o.exports}}]);