(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{954:function(t,a,e){"use strict";e.r(a);var r=e(13),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"gitlab-the-job-has-no-trace-问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-the-job-has-no-trace-问题"}},[t._v("#")]),t._v(" gitlab the job has no trace 问题")]),t._v(" "),e("p",[t._v("真的是蛋疼的问题，影响了好几个月，ci/cd日志丢失")]),t._v(" "),e("p",[t._v("说下解决方法")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("引起原因是因为数据的 ci_job_artifacts created_at 时间不正确，gitlab拿不到")])]),t._v(" "),e("li",[e("p",[t._v("如果你本地是时区修改了的话，db的时区必须要是 UTC")])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://forum.gitlab.com/t/artifacts-stored-searched-in-a-wrong-date-directory/51753",target:"_blank",rel:"noopener noreferrer"}},[t._v("Artifacts stored/searched in a wrong date directory - System Administration - GitLab Forum"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("https://gitlab.com/gitlab-org/gitlab/-/issues/26320")])])]),t._v(" "),e("h2",{attrs:{id:"最终解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最终解决方案"}},[t._v("#")]),t._v(" 最终解决方案")]),t._v(" "),e("p",[t._v("把 ci_job_artifacts 表的 created_at 类型从 timestamptz 改成 timestamp")]),t._v(" "),e("p",[t._v("我没有试过把pg的时区改成UTC, 也许也可以")])])}),[],!1,null,null,null);a.default=s.exports}}]);