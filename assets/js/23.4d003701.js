(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{582:function(a,s,t){a.exports=t.p+"assets/img/2018_11_06_MYt3SOmiz1.b87633c6.png"},583:function(a,s,t){a.exports=t.p+"assets/img/2018_11_06_HBcg9En2J1.8cbf770a.png"},584:function(a,s,t){a.exports=t.p+"assets/img/2018_11_06_R2imWobt9i.784da2b9.png"},585:function(a,s,t){a.exports=t.p+"assets/img/2018_11_09_DqA5USR7mK.d70441a0.png"},833:function(a,s,t){"use strict";t.r(s);var e=t(12),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"èµ·å› "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#èµ·å› "}},[a._v("#")]),a._v(" èµ·å› ")]),a._v(" "),e("blockquote",[e("p",[a._v("å› ä¸ºåšå®¢æ˜¯è¿è¡Œåœ¨dockerä¸Šçš„ï¼Œdocker volume æ€»æ„Ÿè§‰ä¸å®‰å…¨ï¼Œè€Œä¸”åšå®¢é¡¹ç›®çš„æ–‡ç« å¤šäº†ï¼Œå¦‚æœä¸åŠæ—¶å¤‡ä»½ï¼Œåˆ™ä¼šä¸¢å¤±æ•°æ®ã€‚")])]),a._v(" "),e("h2",{attrs:{id:"ç»è¿‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç»è¿‡"}},[a._v("#")]),a._v(" ç»è¿‡")]),a._v(" "),e("h4",{attrs:{id:"step1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step1"}},[a._v("#")]),a._v(" "),e("strong",[a._v("step1")])]),a._v(" "),e("p",[a._v("å› ä¸ºåšå®¢åå°æ˜¯ lumen ï¼Œç›¸å…³çš„æ‰©å±•åŒ…æ²¡æœ‰ laravel é‚£ä¹ˆå¤šï¼Œæ‰€ä»¥å¤„ç†èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚")]),a._v(" "),e("p",[a._v("ä¹‹å‰ star äº†ä¸€ä¸ªæ‰©å±•åŒ… "),e("a",{attrs:{href:"https://github.com/spatie/laravel-backup",target:"_blank",rel:"noopener noreferrer"}},[a._v("spatie/laravel-backup"),e("OutboundLink")],1),a._v("ï¼Œå®ƒæœ‰2800+ â­ï¼Œæœ¬ä»¥ä¸ºç”¨è¿™ä¸ªåŒ…å°±èƒ½å¾ˆæ„‰å¿«çš„è§£å†³å¤‡ä»½é—®é¢˜ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚ğŸ‘‰")]),a._v(" "),e("p",[e("img",{attrs:{src:t(582),alt:"2018_11_06_MYt3SOmiz1.png"}})]),a._v(" "),e("p",[a._v("å¥½å§ï¼ï¼ï¼ä½œè€…éƒ½è¯´ä¸æ”¯æŒäº†ï¼Œé‚£å°±æ˜¯æ²¡æˆäº†ã€‚")]),a._v(" "),e("p",[a._v("é‚£å°±å†æ‰¾æ‰¾å§ï¼")]),a._v(" "),e("br"),a._v(" "),e("h4",{attrs:{id:"step2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step2"}},[a._v("#")]),a._v(" step2")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/backup-manager/laravel",target:"_blank",rel:"noopener noreferrer"}},[a._v("backup-manager/laravel"),e("OutboundLink")],1),a._v(" chrome æœæ¥æœå»åˆæ‰¾åˆ°äº†è¿™ä¸ªåŒ…ï¼Œæ‰ 500+ å¤šä¸ª starï¼Œä¸ç®¡äº†å…ˆè¯•è¯•æŠŠ")]),a._v(" "),e("ol",[e("li",[a._v("é¦–å…ˆå®‰è£… "),e("code",[a._v("composer require backup-manager/laravel")])]),a._v(" "),e("li",[a._v("é…ç½®ï¼Œæˆ‘ç”¨çš„æ˜¯ lumen 5.7.*")])]),a._v(" "),e("div",{staticClass:"language-php line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// FOR LUMEN 5.5 AND ABOVE")]),a._v("\napp"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("configure")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'backup-manager'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \napp"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("register")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a._v("BackupManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Lumen55ServiceProvider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("é…ç½®å®Œåå°±æ˜¯ä½¿ç”¨äº†\n"),e("img",{attrs:{src:t(583),alt:"2018_11_06_HBcg9En2J1.png"}})]),a._v(" "),e("li",[a._v("å®ƒè‡ªå¸¦äº†ä¸‰ä¸ªå‘½ä»¤")])]),a._v(" "),e("ul",[e("li",[e("code",[a._v("db:backup")]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php artisan db:backup --database"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql --destination"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dropbox --destinationPath"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("project --timestamp"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"d-m-Y"')]),a._v(" --compression"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("gzip\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])]),a._v(" "),e("li",[e("code",[a._v("db:list")]),a._v("  æŸ¥çœ‹å‘½ä»¤å¸®åŠ©å³å¯")]),a._v(" "),e("li",[e("code",[a._v("db:restore")]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php artisan db:restore --database"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql --compression"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("gzip --source"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("local --sourcePath"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/backups/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$lastDumpFile")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])])]),a._v(" "),e("h2",{attrs:{id:"ä»¥ä¸ºè¿™æ ·å°±è½»æ¾è§£å†³äº†å—"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä»¥ä¸ºè¿™æ ·å°±è½»æ¾è§£å†³äº†å—"}},[a._v("#")]),a._v(" ä»¥ä¸ºè¿™æ ·å°±è½»æ¾è§£å†³äº†å—ï¼Ÿï¼Ÿï¼Ÿ")]),a._v(" "),e("blockquote",[e("p",[a._v("å¦‚æœä¸æ˜¯dockeré©±åŠ¨çš„ï¼Œé‚£æ˜¯çœŸçš„å°±è¿™æ ·è§£å†³äº†")])]),a._v(" "),e("p",[a._v("å› ä¸ºæˆ‘æ˜¯dockeré©±åŠ¨ï¼Œé‚£ä¹ˆé—®é¢˜å‡ºç°äº†ï¼š")]),a._v(" "),e("ol",[e("li",[a._v("ä½œä¸ºdockeré©±åŠ¨çš„appï¼Œåœ¨æˆ‘çš„app imagesä¸­æ˜¯æ²¡æœ‰ "),e("code",[a._v("mysqldump")]),a._v(" è¿™ä¸ªå‘½ä»¤çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ "),e("code",[a._v("apt install mysql-client-5.7")]),a._v(" å†æ‰“åŒ…åˆ¶ä½œé•œåƒï¼Œè¿™å°±ä¸å¤ªå¥½ï¼Œæ¯•ç«Ÿæˆ‘å¥½å‡ ä¸ªappéƒ½ç”¨è¿™ä¸ªimage")]),a._v(" "),e("li",[a._v("é‚£ä¹ˆå¦‚ä½•åœ¨ä¸ä¿®æ”¹imageé•œåƒçš„æƒ…å†µä¸‹ï¼Œè®©å®ƒè¿è¡Œèµ·æ¥å‘¢ï¼Ÿï¼Ÿ")])]),a._v(" "),e("h2",{attrs:{id:"æˆ‘çš„è§£å†³æ–¹æ¡ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘çš„è§£å†³æ–¹æ¡ˆ"}},[a._v("#")]),a._v(" æˆ‘çš„è§£å†³æ–¹æ¡ˆ")]),a._v(" "),e("ol",[e("li",[a._v("å½“ç„¶æ˜¯åŠ è„šæœ¬å’¯"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/usr/bin/env bash ")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# init.sh")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" -f /usr/bin/mysqldump "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mysqldump exists"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("apt update "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y mysql-client-5.7"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])])]),a._v(" "),e("li",[a._v("åœ¨æˆ‘çš„imageä¸­å…è®¸æ·»åŠ ç”¨æˆ·è„šæœ¬ï¼Œåªéœ€è¦åœ¨ç¯å¢ƒå˜é‡ä¸­åŠ å…¥ "),e("code",[a._v("BASH_NAMES:init.sh")])]),a._v(" "),e("li",[a._v("done!è¿™æ ·åŠ å¥½ä¹‹åï¼Œdocker-compose å¯åŠ¨çš„æ—¶å€™å°±ä¼šåœ¨ä¸ä¿®æ”¹é•œåƒçš„æƒ…å†µä¸‹è‡ªåŠ¨å®‰è£…mysqlå®¢æˆ·ç«¯")]),a._v(" "),e("li",[a._v("ä½†æ˜¯é—®é¢˜åˆå‡ºç°äº†ï¼ï¼Ÿï¼Ÿâš  å½“å®¹å™¨ "),e("code",[a._v("down")]),a._v(" ä¹‹åå†æ¬¡å¯åŠ¨å°±ä¼šé‡æ–°ä¸‹è½½mysqlå®¢æˆ·ç«¯ï¼Œè¿™ä¸ªé—®é¢˜ç”¨è„šæŒ‡å¤´æƒ³æƒ³å°±çŸ¥é“äº†ï¼Œæ²¡æœ‰æŒä¹…åŒ–æ•°æ®ï¼Œå³éœ€è¦ç”¨voulmeså­˜å‚¨ä¿®æ”¹çš„å†…å®¹")])]),a._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[a._v("installdata"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/usr/bin "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å—¯åœ¨vlumeä¸­åŠ è¿™ä¸€å¥")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"å°†æ•°æ®åº“å¤‡ä»½åŠ åˆ°å®šæ—¶ä»»åŠ¡ä¸­å»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å°†æ•°æ®åº“å¤‡ä»½åŠ åˆ°å®šæ—¶ä»»åŠ¡ä¸­å»"}},[a._v("#")]),a._v(" å°†æ•°æ®åº“å¤‡ä»½åŠ åˆ°å®šæ—¶ä»»åŠ¡ä¸­å»")]),a._v(" "),e("p",[e("img",{attrs:{src:t(584),alt:"2018_11_06_R2imWobt9i.png"}})]),a._v(" "),e("h2",{attrs:{id:"å¤‡ä»½ç»“æœ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¤‡ä»½ç»“æœ"}},[a._v("#")]),a._v(" å¤‡ä»½ç»“æœ")]),a._v(" "),e("p",[e("img",{attrs:{src:t(585),alt:"2018_11_09_DqA5USR7mK.png"}})]),a._v(" "),e("blockquote",[e("p",[a._v("æˆ‘çŸ¥é“ä½ ä»¬çœ‹ä¸æ‡‚ï¼Œæˆ‘æ‡‚å°±è¡Œäº†ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ")])]),a._v(" "),e("p",[a._v("ğŸ§€ ğŸ‘")])])}),[],!1,null,null,null);s.default=r.exports}}]);