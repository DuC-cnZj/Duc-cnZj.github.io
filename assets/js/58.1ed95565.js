(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{778:function(s,a,n){"use strict";n.r(a);var e=n(6),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("blockquote",[n("p",[s._v("转自 "),n("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODQ2MzI3NQ==&mid=2247485972&idx=1&sn=6e839c0b05464878f2b2fcc7e7e9a276&chksm=eca43350dbd3ba461b5c0d3a7368badac3af123c7cae2a624aabde44f3972247554e1f9b6026&scene=38#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("k8s中文社区"),n("OutboundLink")],1)])]),s._v(" "),n("blockquote",[n("p",[s._v("只描述非"),n("code",[s._v("windows")]),s._v("系统。")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("FROM <image>[:<tag>] [AS <name>]")]),s._v(": 设置基础镜像")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine:latest")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v('RUN <command> \\ ["executable", "param1", "param2"]')]),s._v(": 执行"),n("code",[s._v("shell")]),s._v("脚本。进来少使用"),n("code",[s._v("RUN")]),s._v("，因为没执行一次 "),n("code",[s._v("docker")]),s._v("就会增加一层只读层。")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /bin/bash -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source $HOME/.bashrc; \\\necho $HOME'")])]),s._v("\n等同于\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /bin/bash -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source $HOME/.bashrc; echo $HOME'")])]),s._v("\n等同于\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" ["),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source $HOME/.bashrc; echo $HOME"')]),s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ul",[n("li",[n("code",[s._v('CMD ["executable","param1","param2"] \\ ["param1","param2"] \\ command param1 param2')]),s._v(": "),n("code",[s._v("DockerFile")]),s._v("中只有一个"),n("code",[s._v("CMD")]),s._v("，多于一个将执行最后一个。它的意思差不多就是启动容器后执行的默认命令。")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" *:*")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("LABEL <key>=<value> <key>=<value> ...")]),s._v(" : 镜像标签")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.example.vendor"')]),s._v("="),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ACME Incorporated"')])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" com.example.label-with-value="),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" version="),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" description="),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This text illustrates \\\nthat label-values can span multiple lines."')])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("EXPOSE <port> [<port>/<protocol>...]")]),s._v(": 暴露容器的端口")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80/tcp")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80/udp")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("ENV <key> <value> \\ <key>=<value>")]),s._v(": 设置容器环境变量。可以使用"),n("code",[s._v("docker run --env <key>=<value>")]),s._v("修改环境变量")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myName John Doe")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myDog Rex The Dog")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myCat fluffy")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[n("code",[s._v('ADD [--chown=<user>:<group>] <src>... <dest> \\ [--chown=<user>:<group>] ["<src>",... "<dest>"]')]),s._v(": 拷贝一个新文件，或者文件夹或者远程文件的 URLS，把他们添加到，镜像的文件系统中。"),n("code",[s._v("<dest>")]),s._v(" 为绝对路径或者由"),n("code",[s._v("WORKDIR")]),s._v("定义的相对路径。")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" hom* /mydir/         # 添加所有以 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hom"')]),s._v(" 开头的文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" hom?.txt /mydir/     # ? 替换任何单个的字符, e.g., "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home.txt"')])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" test relativeDir/    # 添加 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" 到 `WORKDIR`/relativeDir/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" test /absoluteDir/   # 添加 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" 到 /absoluteDir/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" cpath /home/zb")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ARG")]),s._v(" zbpath=/home/lala")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cpath")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" **.jpg "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cpath")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" **.jpg "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$zbpath")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加含有特殊字符的文件或者文件夹时如“[]”,需要遵循 golang 的规则将它们进行转义，以防它们为匹配模式")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" arr[[]0].txt /mydir/ # 复制一个文件名为 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arr[0].txt"')]),s._v(" 到 /mydir/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 --chown 指定添加文件或者文件夹的用户名和组名")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token options"}},[n("span",{pre:!0,attrs:{class:"token property"}},[s._v("--chown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("55:mygroup")])]),s._v(" files* /somedir/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token options"}},[n("span",{pre:!0,attrs:{class:"token property"}},[s._v("--chown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("bin")])]),s._v(" files* /somedir/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token options"}},[n("span",{pre:!0,attrs:{class:"token property"}},[s._v("--chown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("1")])]),s._v(" files* /somedir/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token options"}},[n("span",{pre:!0,attrs:{class:"token property"}},[s._v("--chown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("10:11")])]),s._v(" files* /somedir/")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("ul",[n("li",[n("code",[s._v('COPY [--chown=<user>:<group>] <src>... <dest> / [--chown=<user>:<group>] ["<src>",... "<dest>"]')]),s._v(":  与 "),n("code",[s._v("ADD")]),s._v("命令差不多。")]),s._v(" "),n("li",[n("code",[s._v('ENTRYPOINT ["executable", "param1", "param2"] / command param1 param2')]),s._v(":  容器启动后执行该命令。如果定义"),n("code",[s._v("ENTRYPOINT")]),s._v(" 那么"),n("code",[s._v("CMD")]),s._v("形式就变为"),n("code",[s._v('CMD ["param1","param2"]')]),s._v(" "),n("code",[s._v("json")]),s._v("数组中变为"),n("code",[s._v("ENTRYPOINT")]),s._v("的第一个参数和第二个参数")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ARG")]),s._v(" VERSION=latest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$VERSION")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" ["),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-la"')]),s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("code",[s._v("ENTRYPOINT")]),s._v("与"),n("code",[s._v("CMD")]),s._v("的比较")]),s._v(" "),n("ol",[n("li",[s._v("当有多个"),n("code",[s._v("ENTRYPOINT CMD")]),s._v("它们都只执行最后一个")]),s._v(" "),n("li",[s._v("当容器为一个可执行文件时应该定义"),n("code",[s._v("ENTRYPOINT")])]),s._v(" "),n("li",[s._v("当同时定义"),n("code",[s._v("ENTRYPOINT 和 CMD")]),s._v("时，"),n("code",[s._v("CMD")]),s._v("为"),n("code",[s._v("ENTRYPOINT")]),s._v("的默认参数")]),s._v(" "),n("li",[s._v("当"),n("code",[s._v("docker")]),s._v("执行"),n("code",[s._v("run")]),s._v("命令时，在里面指定"),n("code",[s._v("CMD")]),s._v("时，"),n("code",[s._v("CMD")]),s._v("将会被重写。")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v('VOLUME ["/data"]')]),s._v(": 在制作镜像时挂载卷。会在宿主机上自动生成一个对应的共享目录。")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir /data1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" touch /data1/2a.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" /data1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过命令 docker inspect hasVvolume")]),s._v('\n"Mounts": [\n            {\n                "Type": "volume",\n                "Name": "0d63fcdf621ee728bb85dfcc2b30f3acddf6489a0e93b81ced17f05860497321",\n                "Source": "/var/lib/docker/volumes/0d63fcdf621ee728bb85dfcc2b30f3acddf6489a0e93b81ced17f05860497321/_data",\n                "Destination": "/data1",\n                "Driver": "local",\n                "Mode": "",\n                "RW": true,\n                "Propagation": ""\n            }\n        ]\n====================================================================================\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可以通过 docker run -v 来挂载共享目录，这时 Source 指出 -v 时定义的目录")]),s._v('\n"Mounts": [\n        {\n                "Type": "bind",\n                "Source": "/Users/zhangbo/Desktop/data1",\n                "Destination": "/data1",\n                "Mode": "",\n                "RW": true,\n                "Propagation": "rprivate"\n            }\n        ]\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("容器中共享目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 --volumes-from，达到容器中文件夹共享")]),s._v("\ndocker run -itd --name noVvolume-v-1 --volumes-from noVvolume-v 48cd9e43b6a9\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("USER <user>[:<group>] / <UID>[:<GID>]")]),s._v(": 给镜像添加一个用户")]),s._v(" "),n("li",[n("code",[s._v("WORKDIR /path/to/workdir or WORKDIR to_workdir /path/to/workdir")]),s._v(": 为 "),n("code",[s._v("RUN, CMD, ENTRYPOINT, COPY, ADD")]),s._v(" 创建工作目录")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" DIRPATH /path")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DIRPATH")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DIRNAME")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" pwd")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("ARG <name>[=<default value>]")]),s._v(" : "),n("code",[s._v("docker file")]),s._v("中的变量")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('FROM busybox\nARG user1="zhang bo"\nARG buildno\nRUN echo $user1\nRUN echo $buildno\n\nStep */* : RUN echo $user1\n ---\x3e Running in a56a602a8f87\nzhang bo\nRemoving intermediate container a56a602a8f87\n ---\x3e 3e9c6ec19129\nStep */* : RUN echo $buildno\n ---\x3e Running in 6598768a1080\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("预制变量")]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ARG")]),s._v(" CONT_IMG_VER")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" CONT_IMG_VER "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CONT_IMG_VER:-v1.0.0}")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CONT_IMG_VER")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以通过 --build-arg 标签进行给定的预制的变量。--build-arg <varname>=<value>")]),s._v("\ndocker run --build-arg CONT_IMG_VER=******* .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"docker-常用命令如下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令如下"}},[s._v("#")]),s._v(" docker 常用命令如下")]),s._v(" "),n("p",[s._v("管理命令：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-txt"}},[n("code",[s._v("  container   管理容器\n  image       管理镜像\n  network     管理网络\n  node        管理Swarm节点\n  plugin      管理插件\n  secret      管理Docker secrets\n  service     管理服务\n  stack       管理Docker stacks\n  swarm       管理Swarm集群\n  system      查看系统信息\n  volume      管理卷\n  \n  如：docker container ls 显示所有容器\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("普通命令：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-txt"}},[n("code",[s._v("  attach     进入一个运行的容器\n  build      从一个DockerFile构建镜像\n  commit     从容器创建一个镜像\n  cp          从容器和主机文件系统之间拷贝文件 \n  create      创建一个容器\n  diff        检查容器文件系统上的更改\n  events      从服务器获取实时事件\n  exec        在正在运行的容器中运行命令\n  export      将容器的文件系统导出为tar存档\n  history     显示镜像的历史记录\n  images      查看镜像列表\n  import      从归档文件中创建镜像\n  info        显示系统范围的信息\n  inspect     返回Docker对象的低级信息\n  kill        kill运行中的容器\n  load        从存档或者STDIN加载镜像\n  login       登陆docker镜像仓库\n  logout      退出docker镜像仓库\n  logs        获取一个容器的日志\n  pause       暂停一个或多个容器中的所有进程\n  port        查看端口映射或容器的特定映射列表\n  ps          查看容器列表\n  pull        从镜像仓库拉取镜像\n  push        将本地的镜像上传到镜像仓库,要先登陆到镜像仓库\n  rename      重命名容器\n  restart     重启容器\n  rm          删除容器\n  rmi         删除镜像\n  run         创建一个新的容器并运行一个命令\n  save        将指定镜像保存成 tar 归档文件\n  search      从Docker Hub搜索镜像\n  start       启动容器\n  stats       实时显示容器资源使用情况的统计信息\n  stop       停止容器\n  tag         标记本地镜像，将其归入某一仓库\n  top         展示一个容器中运行的进程\n  unpause     恢复容器中所有的进程\n  update      更新容器配置\n  version    显示Docker的版本信息\n  wait        阻塞直到容器停止，然后打印退出代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);