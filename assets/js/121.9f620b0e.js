(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{911:function(s,t,a){"use strict";a.r(t);var e=a(13),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("设置选项可在每条输出的文本前增加一些额外信息，如日期时间、文件名等。")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tLdate         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("iota")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the date in the local time zone: 2009/01/23")]),s._v("\n\tLtime                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the time in the local time zone: 01:23:23")]),s._v("\n\tLmicroseconds                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// microsecond resolution: 01:23:23.123123.  assumes Ltime.")]),s._v("\n\tLlongfile                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// full file name and line number: /a/b/c/d.go:23")]),s._v("\n\tLshortfile                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// final file name element and line number: d.go:23. overrides Llongfile")]),s._v("\n\tLUTC                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// if Ldate or Ltime is set, use UTC rather than the local time zone")]),s._v("\n\tLmsgprefix                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// move the "prefix" from the beginning of the line to before the message')]),s._v("\n\tLstdFlags     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Ldate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Ltime "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// initial values for the standard logger")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("code",[s._v("log")]),s._v("库提供了 6 个选项：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Ldate")]),s._v("：输出当地时区的日期，如"),a("code",[s._v("2020/02/07")]),s._v("；")]),s._v(" "),a("li",[a("code",[s._v("Ltime")]),s._v("：输出当地时区的时间，如"),a("code",[s._v("11:45:45")]),s._v("；")]),s._v(" "),a("li",[a("code",[s._v("Lmicroseconds")]),s._v("：输出的时间精确到微秒，设置了该选项就不用设置"),a("code",[s._v("Ltime")]),s._v("了。如"),a("code",[s._v("11:45:45.123123")]),s._v("；")]),s._v(" "),a("li",[a("code",[s._v("Llongfile")]),s._v("：输出长文件名+行号，含包名，如"),a("code",[s._v("github.com/darjun/go-daily-lib/log/flag/main.go:50")]),s._v("；")]),s._v(" "),a("li",[a("code",[s._v("Lshortfile")]),s._v("：输出短文件名+行号，不含包名，如"),a("code",[s._v("main.go:50")]),s._v("；")]),s._v(" "),a("li",[a("code",[s._v("LUTC")]),s._v("：如果设置了"),a("code",[s._v("Ldate")]),s._v("或"),a("code",[s._v("Ltime")]),s._v("，将输出 UTC 时间，而非当地时区。")])]),s._v(" "),a("p",[s._v("调用"),a("code",[s._v("log.SetFlag")]),s._v("设置选项，可以一次设置多个：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SetFlags")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Lshortfile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Ldate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Lmicroseconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("为什么这里需要 用 1<<iota 的方式来设置常量呢？为什么设置时可以用或运算呢？")]),s._v(" "),a("p",[s._v("可以得到上面的常量都是 2 的倍数")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tLdate         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("iota")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^0 = 1      \t0000 0001")]),s._v("\n\tLtime                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^1 = 2\t\t\t\t0000 0010")]),s._v("\n\tLmicroseconds                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^2 = 4\t\t\t\t0000 0100")]),s._v("\n\tLlongfile                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^3 = 8\t\t\t\t0000 1000")]),s._v("\n\tLshortfile                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^4 = 16\t\t\t\t0001 0000")]),s._v("\n\tLUTC                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^5 = 32\t\t\t\t0010 0000")]),s._v("\n\tLmsgprefix                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1*2^6 = 64\t\t\t\t0100 0000")]),s._v("\n\tLstdFlags     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Ldate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Ltime "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1 | 2 => 3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("这样的做法是什么呢？任意常量或(|)操作的和与(&)本身都不等于0")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1|2 & 1 != 0\n1|2 & 2 != 0\n1|2 & 3 == 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("底层通过&运算!=0来判断是否设置了该常量")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[s._v("l"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("flag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ltime"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Lmicroseconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("flag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("Lmicroseconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("flag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Lshortfile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Llongfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("o(￣▽￣)ｄ")])])}),[],!1,null,null,null);t.default=n.exports}}]);